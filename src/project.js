window.__require=function t(o,e,i){function l(r,n){if(!e[r]){if(!o[r]){var h=r.split("/");if(h=h[h.length-1],!o[h]){var c="function"==typeof __require&&__require;if(!n&&c)return c(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+r+"'")}}var u=e[r]={exports:{}};o[r][0].call(u.exports,function(t){return l(o[r][1][t]||t)},u,u.exports,t,o,e,i)}return e[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)l(i[r]);return l}({Test:[function(t,o,e){"use strict";cc._RF.push(o,"298f6OM00hO2L7yDug2JvCO","Test");var i=t("slot.Roller");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},spin:function(){this.node.getComponentsInChildren(i).forEach(function(t,o,e){t.toggleSpin()})},w_spin:function(){var t=this.node.getComponentsInChildren(i);setTimeout(function(){t[0].toggleSpin()}.bind(this),3e3),setTimeout(function(){t[1].toggleSpin()}.bind(this),5e3),setTimeout(function(){t[2].toggleSpin()}.bind(this),7e3),setTimeout(function(){t[3].toggleSpin()}.bind(this),9e3)}}),cc._RF.pop()},{"slot.Roller":"slot.Roller"}],"slot.Roller":[function(t,o,e){"use strict";cc._RF.push(o,"6dec3JbzbtEYKHs5mCVQKs1","slot.Roller");var i=t("slot.Symbol");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,executeInEditMode:!0},properties:{_rollerRows:0,rollerRows:{get:function(){return this._rollerRows},set:function(t){this._rollerRows=t,this._createSymbols()},min:0,step:1},_rollerWidth:180,rollerWidth:{get:function(){return this._rollerWidth},set:function(t){this._rollerWidth=t,this._updateScroller()},min:0,step:1},_rollerHeight:540,rollerHeight:{get:function(){return this._rollerHeight},set:function(t){this._rollerHeight=t,this._updateScroller()},min:0,step:1},rollerScrollRate:{default:1,min:.1,max:2,step:.05,slide:!0},_rollerSymbolResult:[],rollerSymbolResult:{get:function(){return this._rollerSymbolResult},set:function(t){this._rollerSymbolResult=t;for(var o,e,l=this._scroller.getComponentsInChildren(i),s=0;s<l.length-1;s++)e=l[s+1],o=parseInt(this._rollerSymbolResult[s]),isNaN(o)||o<0?e.randomSymbol():e.symbolIndex=o}},_symbolWidth:180,symbolWidth:{get:function(){return this._symbolWidth},set:function(t){this._symbolWidth=t,this.rollerWidth=this._symbolWidth,this._updateSymbolSize()},min:0,step:1},_symbolHeight:180,symbolHeight:{get:function(){return this._symbolHeight},set:function(t){this._symbolHeight=t,this._updateSymbolSize()},min:0,step:1},symbolEmptySF:{default:null,type:cc.SpriteFrame,notify:function(){this._updateSymbolSpriteFrame()}},symbolRollSF:[cc.SpriteFrame],symbolBlurSF:[cc.SpriteFrame],_doScrollling:!1,_isScrolling:!1,isSpinning:{readonly:!0,get:function(){return 1==this._doScrollling||1==this._isScrolling}}},onLoad:function(){this._scroller=this.node.getChildByName("scroller")||new cc.Node,this._scroller.name="scroller",this._scroller.removeFromParent(!1),this.node.addChild(this._scroller);this._scroller.getComponent(cc.Mask)||this._scroller.addComponent(cc.Mask);this._updateScroller(),this._updateSymbolSize(),this._updateSymbolSpriteFrame(),this.rollerSymbolResult=[],this._customRollerResult=[]},setRollerSize:function(t,o){this._rollerWidth=t,this._rollerHeight=o,this._updateScroller()},_updateScroller:function(){this.node.width=this._scroller.width=this.rollerWidth,this.node.height=this._scroller.height=this.rollerHeight},_createSymbols:function(){if(this._scroller.removeAllChildren(),this.rollerRows>0){for(var t,o=0;o<this.rollerRows+1;o++)(t=new cc.Node).name="symbol_"+o,t.addComponent(i),this._scroller.addChild(t);this._updateSymbolSize(),this._updateSymbolSpriteFrame()}},_updateSymbolSize:function(){var t=this._scroller.getComponentsInChildren(i);this._rollerTopBound=this.symbolHeight*(this.rollerRows+1)/2,this._rollerBottomBound=-this.symbolHeight*(this.rollerRows+1)/2,t.forEach(function(t,o,e){t.symbolWidth=this.symbolWidth,t.symbolHeight=this.symbolHeight,t.node.y=this._rollerTopBound-t.symbolHeight*o},this),this.rollerHeight=this.symbolHeight*this.rollerRows},_updateSymbolSpriteFrame:function(){this._scroller.getComponentsInChildren(i).forEach(function(t,o,e){t.isBlur=!1,t.symbolEmptySF=this.symbolEmptySF,t.symbolRollSF=this.symbolRollSF,t.symbolBlurSF=this.symbolBlurSF},this)},setSymbolSize:function(t,o){this._symbolWidth=t,this._symbolHeight=o,this._updateSymbolSize()},update:function(t){var o=Math.ceil(.15*this.symbolHeight*this.rollerScrollRate);this._isScrolling&&(this._scroller.getComponentsInChildren(i).forEach(function(t,e,i){var l=t.node.y-o;l<this._rollerBottomBound&&(this._doScrollling||this._rollerSymbolResult.length<this.rollerRows?(t.randomSymbol(),this._rollerSymbolResult.unshift(t.symbolIndex)):this._customRollerResult.length>0?(t.symbolIndex=this._customRollerResult.pop(),this._rollerSymbolResult.unshift(t.symbolIndex)):this._isScrolling=!1,l=this._rollerTopBound-(this._rollerBottomBound-l)),t.node.y=l},this),0==this._isScrolling&&(this._rollerSymbolResult=this._rollerSymbolResult.slice(0,this.rollerRows),this._readyStopSpin()))},_readyStartSpin:function(){this._scroller.getComponentsInChildren(i).forEach(function(t,o,e){var i=Math.ceil(.2*this.symbolHeight*this.rollerScrollRate),l=cc.sequence(cc.moveBy(.1,0,i),cc.callFunc(function(){t.isBlur=!0,t.node.y=Math.ceil(t.node.y),o==e.length-1&&(this._isScrolling=!0)},this));t.node.runAction(l)},this)},_readyStopSpin:function(){this._scroller.getComponentsInChildren(i).forEach(function(t,o,e){var i=this._rollerBottomBound-t.node.y,l=t.symbolHeight-Math.abs(Math.ceil(i%t.symbolHeight)),s=cc.sequence(cc.moveBy(.05,0,l),cc.callFunc(function(){t.isBlur=!1,t.node.y=Math.ceil(t.node.y),o==e.length-1&&(cc.log("Final Result:",this._rollerSymbolResult),this._doScrollling=!1)},this));t.node.runAction(s)},this)},_startSpin:function(){this._doScrollling=!0,this._rollerSymbolResult=[],this._readyStartSpin()},_stopSpin:function(){this._doScrollling=!1},spin:function(){this._doScrollling||this._isScrolling||this._startSpin()},stop:function(t){this._doScrollling&&this._isScrolling&&(this._customRollerResult=t||[],this._stopSpin())},toggleSpin:function(){this.isSpinning?this.stop([1]):this.spin()}});cc._RF.pop()},{"slot.Symbol":"slot.Symbol"}],"slot.Symbol":[function(t,o,e){"use strict";var i;function l(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}cc._RF.push(o,"26f65S90H9KtYMdipUy38Ht","slot.Symbol");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,executeInEditMode:!0},properties:(i={_symbolIndex:0,symbolIndex:{get:function(){return this._symbolIndex},set:function(t){var o=t%this.symbolRollSF.length;this._symbolIndex=isNaN(o)?t:o,this.isBlur=this.isBlur},min:0,step:1},_isBlur:!1,isBlur:{get:function(){return this._isBlur},set:function(t){this._isBlur=t,this._isBlur&&this.symbolBlurSF[this._symbolIndex]?this._sprite.spriteFrame=this.symbolBlurSF[this._symbolIndex]:this.symbolRollSF[this._symbolIndex]?this._sprite.spriteFrame=this.symbolRollSF[this._symbolIndex]:this._sprite.spriteFrame=this.symbolEmptySF}},_symbolWidth:120,symbolWidth:{get:function(){return this.node.width},set:function(t){this.node.width=t},min:0,step:1},_symbolHeight:120,symbolHeight:{get:function(){return this.node.height},set:function(t){this.node.height=t},min:0,step:1}},l(i,"_isBlur",!1),l(i,"symbolEmptySF",{default:null,type:cc.SpriteFrame,notify:function(){this.emptySymbol()}}),l(i,"symbolRollSF",[cc.SpriteFrame]),l(i,"symbolBlurSF",[cc.SpriteFrame]),i),onLoad:function(){this.node.anchorX=.5,this.node.anchorY=.5;var t=this.node.getChildByName("symbolSprite")||new cc.Node;t.name="symbolSprite",t.removeFromParent(!1),this.node.addChild(t),this._sprite=t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite),this._sprite.type=0,this._sprite.sizeMode=cc.Sprite.SizeMode.RAW,this._sprite.trim=!1},randomSymbol:function(){var t=Math.floor(this.symbolRollSF.length*Math.random());this.symbolIndex=t},emptySymbol:function(){this._sprite.spriteFrame=this.symbolEmptySF}});cc._RF.pop()},{}]},{},["Test","slot.Roller","slot.Symbol"]);